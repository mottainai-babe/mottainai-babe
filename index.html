<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mottainai Babe</title>

  <style>
    :root{
      --bg:#377649;
      --white:#ffffff;
      --white-80: rgba(255,255,255,.8);
      --white-65: rgba(255,255,255,.65);
      --pill: rgba(255,255,255,.12);
      --stroke: rgba(255,255,255,.55);
      --shadow: none; /* ✅ 로고 그림자 제거 */
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      background:var(--bg);
      color:var(--white);
      font-family: ui-sans-serif, system-ui, -apple-system, "Hiragino Sans", "Noto Sans JP", "Segoe UI", Roboto, Arial;
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
    }

    .wrap{
      width:min(980px, 92vw);
      padding:48px 70px;
      position:relative;
    }

    .center{
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      gap:18px;
      text-align:center;
      padding:28px 0 10px;
    }

    /* ✅ 로고 크게 */
    .logo{
      width:min(520px, 78vw);
      height:auto;
      display:block;
      filter:none;
      box-shadow:none;
      text-shadow:none;
    }

    .jp-title{
      font-size:18px;
      letter-spacing:.06em;
      font-weight:700;
      margin-top:4px;
    }
    .jp-sub{
      font-size:14px;
      letter-spacing:.05em;
      color:var(--white-80);
    }

    .btns{
      display:flex;
      flex-direction:column;
      gap:12px;
      margin-top:10px;
      width:min(520px, 78vw);
    }
    .btn{
      width:100%;
      height:58px;
      border-radius:999px;
      font-size:16px;
      font-weight:700;
      letter-spacing:.02em;
      cursor:pointer;
      border:1px solid var(--stroke);
      background:transparent;
      color:var(--white);
    }
    .btn.primary{
      background:rgba(255,255,255,.85);
      border-color:rgba(255,255,255,.85);
      color:#1f3d2b;
    }
    .btn:active{transform:translateY(1px)}
    .btn[disabled]{opacity:.6; cursor:not-allowed}

    .badges{
      margin-top:14px;
      display:flex;
      gap:14px;
      flex-wrap:wrap;
      justify-content:center;
    }
    .badge{
      padding:10px 16px;
      border-radius:999px;
      background:var(--pill);
      border:1px solid rgba(255,255,255,.12);
      font-size:13px;
      color:var(--white-80);
      font-weight:700;
    }

    .footer{
      margin-top:22px;
      padding-top:14px;
      border-top:1px solid rgba(255,255,255,.14);
      color:var(--white-65);
      font-size:12px;
      line-height:1.55;
      text-align:center;
    }
    .footer a{
      color:var(--white-80);
      text-decoration:none;
    }
    .footer a:hover{text-decoration:underline}

    .status{
      margin-top:12px;
      font-size:12px;
      color:rgba(255,255,255,.85);
      opacity:.95;
      min-height:18px;
    }

    @media (max-width:520px){
      .wrap{padding:34px 20px}
      .btn{height:54px}
    }
  </style>
</head>

<body>
  <main class="wrap">
    <section class="center">
      <!-- ✅ logo.png가 아니라 logo1.png -->
      <img class="logo" src="./logo1.png" alt="Mottainai Babe" />

      <div class="jp-title">もったいないベビー</div>
      <div class="jp-sub">ベビー用品交換プラットフォーム</div>

      <div class="btns">
        <button id="btnPost" class="btn primary" type="button">出品する</button>
        <button id="btnView" class="btn" type="button">アイテムを見る</button>
      </div>

      <div class="badges" aria-label="features">
        <div class="badge">簡単出品</div>
        <div class="badge">安心交換</div>
        <div class="badge">利用無料</div>
      </div>

      <div id="status" class="status"></div>
    </section>

    <footer class="footer">
      <div>Mottainai Babeは、ベビー用品を必要な人へつなぐ交換プラットフォームです。</div>
      <div>
        <a href="./terms.html">利用規約</a>
        &nbsp;|&nbsp;
        <a href="./privacy.html">プライバシーポリシー</a>
        &nbsp;|&nbsp;
        <a href="./about.html">お問い合わせ</a>
      </div>
      <div>© 2026 Mottainai Babe. All rights reserved.</div>
    </footer>
  </main>

  <!-- 1) ✅ config 먼저 로드 (window.FIREBASE_CONFIG 생성) -->
  <script src="./firebase-config.js"></script>

  <!-- 2) ✅ Firebase compat (정적 호스팅에서 제일 안정적) -->
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.12.5/firebase-auth-compat.js"></script>

  <script>
    const statusEl = document.getElementById("status");
    const btnPost  = document.getElementById("btnPost");
    const btnView  = document.getElementById("btnView");

    function setStatus(msg){ statusEl.textContent = msg || ""; }

    // ✅ 아이템 보기: 바로 app.html 이동
    btnView.addEventListener("click", () => {
      location.href = "./app.html";
    });

    // ✅ Firebase init & Google 로그인
    (function init(){
      try{
        if(!window.FIREBASE_CONFIG || !window.FIREBASE_CONFIG.apiKey){
          alert("firebase-config.js の読み込みに失敗しました。index.html と同じフォルダ(ルート)に置いてください。");
          return;
        }
        firebase.initializeApp(window.FIREBASE_CONFIG);
      }catch(e){
        console.error(e);
        alert("Firebase 初期化に失敗しました。firebase-config.js を確認してください。");
      }
    })();

    btnPost.addEventListener("click", async () => {
      try{
        btnPost.disabled = true;
        setStatus("Googleログイン中…");

        const provider = new firebase.auth.GoogleAuthProvider();
        // ✅ ここでポップアップログイン
        await firebase.auth().signInWithPopup(provider);

        // ✅ 로그인 성공 → app.html로
        location.href = "./app.html";
      }catch(err){
        console.error(err);

        // 사용자에게 이해되는 메시지로
        let msg = "ログインに失敗しました。";
        if(err && err.code === "auth/popup-blocked") msg = "ポップアップがブロックされています。ブラウザ設定をご確認ください。";
        if(err && err.code === "auth/unauthorized-domain") msg = "Firebaseの許可ドメインにこのURLが登録されていません。";
        if(err && err.code === "auth/api-key-not-valid") msg = "Firebase設定(apiKeyなど)が正しく読み込めていません。firebase-config.jsを確認してください。";

        alert(msg + "\n\n" + (err?.message || ""));
        setStatus("");
      }finally{
        btnPost.disabled = false;
      }
    });
  </script>
</body>
</html>
